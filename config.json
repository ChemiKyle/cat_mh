{
	"name": "CAT_MH_CHA",

	"namespace": "VICTR\\REDCAP\\CAT_MH_CHA",

	"description": "Add this module to a project and configure it to allow survey participants to take CAT-MH interviews and store their responses in REDCap.",

	"documentation": "README.md",

	"authors": [
		{
			"name": "Carl Reed",
			"email": "carl.w.reed@vumc.org",
			"institution": "Vanderbilt University Medical Center"
		}
	],

	"permissions": [
		"redcap_survey_complete"
	],
	
	"enable-every-page-hooks-on-system-pages": false,	

	"links": {
		"project": [
			{
				"name": "CAT-MH Patient Dashboard",
				"icon": "report",
				"url": "dashboard.php"
			},
			{
				"name": "CAT-MH Sequence Scheduling",
				"icon": "report",
				"url": "scheduling.php"
			},
			{
				"name": "CAT-MH Interview Results Report",
				"icon": "report",
				"url": "resultsReport.php"
			}
		],
		"control-center": [

		]
	},

	"no-auth-pages": [
		"interview",
		"CAT_MH_CHA"
	],

	"project-settings": [
		{
			"key": "email-subject",
			"name": "Subject line for automated interview invitations",
			"type": "text"
		},
		{
			"key": "email-body",
			"name": "Body text for automated interview invitations",
			"type": "rich-text"
		},
		{
			"key": "email-from",
			"name": "Set the 'from' address emails will be sent from",
			"type": "text"
		},
		{
			"key": "reminder-email-subject",
			"name": "Subject line for reminder emails",
			"type": "text"
		},
		{
			"key": "reminder-email-body",
			"name": "Body text for reminder emails",
			"type": "rich-text"
		},
		{
			"key": "send-provider-emails",
			"name": "Automatically send email to patient's provider upon interview completion",
			"type": "checkbox"
		},
		{
         "key": "catmh_options",
         "name": "CAT-MH Interview Options",
         "required": false,
         "type": "sub_settings",
         "repeatable":true,
         "sub_settings":[
            {
				"key": "sequence",
				"name": "Name for this sequence of CAT-MH tests",
				"required": true,
				"type": "text"
			},
            {
               "key": "language",
               "name": "Interview language",
               "required": true,
               "type": "radio",
			   "choices": [
					{"value": "1", "name": "English"},
					{"value": "2", "name": "Spanish"}
			   ]
            },
            {
			   "key": "tests",
			   "name": "Tests included in interview",
			   "type": "descriptive"
            },
			{"type": "checkbox", "key": "dep", "name": "Depression"},
			{"type": "checkbox", "key": "dep_show_results", "name": "Show Results"},
			{"type": "text", "key": "dep_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "mdd", "name": "Major Depressive Disorder"},
			{"type": "checkbox", "key": "mdd_show_results", "name": "Show Results"},
			{"type": "text", "key": "mdd_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "anx", "name": "Anxiety Disorder"},
			{"type": "checkbox", "key": "anx_show_results", "name": "Show Results"},
			{"type": "text", "key": "anx_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "mhm", "name": "Mania/Hypomania"},
			{"type": "checkbox", "key": "mhm_show_results", "name": "Show Results"},
			{"type": "text", "key": "mhm_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "pdep", "name": "Depression (Perinatal)"},
			{"type": "checkbox", "key": "pdep_show_results", "name": "Show Results"},
			{"type": "text", "key": "pdep_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "panx", "name": "Anxiety Disorder (Perinatal)"},
			{"type": "checkbox", "key": "panx_show_results", "name": "Show Results"},
			{"type": "text", "key": "panx_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "pmhm", "name": "Mania/Hypomania (Perinatal)"},
			{"type": "checkbox", "key": "pmhm_show_results", "name": "Show Results"},
			{"type": "text", "key": "pmhm_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "sa", "name": "Substance Abuse"},
			{"type": "checkbox", "key": "sa_show_results", "name": "Show Results"},
			{"type": "text", "key": "sa_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "ptsd", "name": "Post-Traumatic Stress Disorder"},
			{"type": "checkbox", "key": "ptsd_show_results", "name": "Show Results"},
			{"type": "text", "key": "ptsd_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "cssrs", "name": "C-SSRS Suicide Screen"},
			{"type": "checkbox", "key": "cssrs_show_results", "name": "Show Results"},
			{"type": "text", "key": "cssrs_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "ss", "name": "Suicide Scale"},
			{"type": "checkbox", "key": "ss_show_results", "name": "Show Results"},
			{"type": "text", "key": "ss_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "phq9", "name": "PHQ-9"},
			{"type": "checkbox", "key": "phq9_show_results", "name": "Show Results"},
			{"type": "text", "key": "phq9_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "aadhd", "name": "Adult ADHD"},
			{"type": "checkbox", "key": "aadhd_show_results", "name": "Show Results"},
			{"type": "text", "key": "aadhd_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "psys", "name": "Psychosis - Self-Report"},
			{"type": "checkbox", "key": "psys_show_results", "name": "Show Results"},
			{"type": "text", "key": "psys_label", "name": "Alternate Label"},
			{"type": "checkbox", "key": "sdoh", "name": "Social Determinants of Health"},
			{"type": "checkbox", "key": "sdoh_show_results", "name": "Show Results"},
			{"type": "text", "key": "sdoh_label", "name": "Alternate Label"}
         ]
        }
	],

	"system-settings": [
		{
			"key": "applicationid",
			"name": "Application ID received from CAT-MH API registration",
			"required": true,
			"type": "text"
		},
		{
			"key": "organizationid",
			"name": "Organization ID received from CAT-MH API registration",
			"required": true,
			"type": "text"
		}
	],

	"crons": [
		{
			"cron_name": "emailer_cron",
			"cron_description": "Cron that runs every minute to send automatic interview invites and reminder emails",
			"method": "emailer_cron",
			"cron_frequency": "60",
			"cron_max_run_time": "3540"
		}
	],

	"compatibility": {
		"php-version-min": "",
		"php-version-max": "",
		"redcap-version-min": "",
		"redcap-version-max": ""
	},
	
	"framework-version": 2,
	
	"versions": {
		"0.1.1": "Fixed issue where interview URLs sent via cron task had missing subject IDs. Updated logging to be more helpful for scheduled emails (cronEmail)."
	}
}